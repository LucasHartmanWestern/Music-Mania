<div class="resultsContainer">

  <!-- Genre display -->
  <ng-container *ngIf="!tracks.length && !artists.length && !selectedList">
    <ul>
      <li *ngFor="let genre of genres" (click)="getTracks('', '', genre.title)">
        <div class="genre">
          <span class="title">{{genre.title}}</span>
          <span>{{genre['#tracks']}} tracks</span>
          <span>{{genre.genre_id}}</span>
          <span>Parent: {{genre.parent}}</span>
        </div>
      </li>
    </ul>
  </ng-container>

  <!-- Track display -->
  <ng-container *ngIf="tracks.length || selectedList">

    <ng-container *ngIf="selectedList">
      <div class="header">
        <button class="review" (click)="openReview(selectedList, true)">Write a review</button>
        <span [ngbPopover]="editName" placement="left" [autoClose]="'outside'" #renamePopover="ngbPopover">{{selectedList.listName}}</span>
        <button (click)="deleteList(selectedList)">X</button>

        <ng-template #editName>
          <form (submit)="renameList($event, newName.value); renamePopover.close()">
            <input type="text" placeholder="New List Name" #newName >
            <input type="submit" value="Rename" >
          </form>
        </ng-template>

      </div>
    </ng-container>

    <table>
      <tr class="headers">
        <th (click)="sortTable(0)">#</th>
        <th></th>
        <th (click)="sortTable(2)">Title</th>
        <th (click)="sortTable(3)">Album</th>
        <th (click)="sortTable(4)">Duration</th>
        <th></th>
      </tr>

      <tr *ngFor="let row of tracks" (click)="preview('track', row)">
        <td>{{row.trackID}}</td>
        <td><img [src]="row.trackImage" onerror="this.src='http://www.kurin.com/wp-content/uploads/placeholder-square.jpg'" class="trackImage"></td>
        <td>{{row.trackTitle}}</td>
        <td>{{row.albumTitle}}</td>
        <td>{{row.trackDuration}}</td>
        <td *ngIf="!selectedList" (click)="addToList(row)">+</td>
        <td *ngIf="selectedList" (click)="removeFromList(row)">-</td>
      </tr>
    </table>
  </ng-container>

  <!-- Artist display -->
  <ng-container *ngIf="artists.length">
    <table>
      <tr class="headers">
        <th (click)="sortTable(0)">#</th>
        <th (click)="sortTable(1)">Name</th>
        <th (click)="sortTable(2)">Website</th>
      </tr>

      <tr *ngFor="let row of artists" (click)="preview('artist', row)">
        <td>{{row.artist_id}}</td>
        <td class="artistName" (click)="getTracks('', '', '',  row.artist_name)">{{row.artist_name}}</td>
        <td><a [href]="row.artist_website">Link to Website</a></td>
      </tr>
    </table>
  </ng-container>

</div>
